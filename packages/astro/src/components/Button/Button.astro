---
import { button } from "./button.css";
import type { ButtonProps } from "./Button.types";
import { palettes } from "../../theme/palette/palette.css";

const {
  as: Tag = "button",
  class: className,
  type = "button",
  disabled,
  shape,
  fill,
  size,
  block,
  palette = "yellow",
  loading,
  loadingText,
  loadingSpinner,
  spinnerPlacement = "start",
  ...props
}: ButtonProps = Astro.props;
---

<Tag class:list={[
  button({
    shape,
    fill,
    size,
    block,
  }),
  palettes[palette],
  className,
]} {type} data-loading={loading} disabled={disabled || loading} {...props}>
  {loading ?
    (<span class="loading-content">
      {spinnerPlacement === "start" && (
        loadingText ?
          (loadingSpinner ?? <span>[]</span>) :
          (<span class="spinner-wrapper">
            {loadingSpinner ?? <span>[]</span>}
          </span>)
      )}
      {loadingText ??
        <span class="text-wrapper">
          <slot />
        </span>}
      {spinnerPlacement === "end" && (
        loadingText ?
          (loadingSpinner ?? <span>[]</span>) :
          (<span class="spinner-wrapper">
            {loadingSpinner ?? <span>[]</span>}
          </span>)
      )}
    </span>) :
    <slot />}
</Tag>
